{% extends "index.html" %} 
{% block title %}
Pago | JetBooms
{% endblock title%}

{% block styles_apply %} 
{% load static %}
{% if user.is_authenticated %}
    <link rel="stylesheet" href="{% static "css/pagoLogueado.css" %}" /> 
{% else %}
    <link rel="stylesheet" href="{% static "css/pagoSinLoguear.css" %}" /> 
{% endif %}
{% endblock styles_apply %}
 
{% block main_content %}
    {% if user.is_authenticated %}
    <div class="section-pago">
      <h1>Pago</h1>
      <div class="container-usuario">
        <label for="usuario" class="usuario">Sesion iniciada como:</label>
        <input disabled type="text" id="usuario" class="input-correo-usuario" placeholder=" " value="{{ user.email }}" >
      </div>
    </div>
  
    <hr>
  
    
    <div class="detalle-pago">
      <h1 class="title">Información de la cuenta</h1>
      <div class="info-personal">
        <div class="container">
          <input type="text" id="nombre" class="input" placeholder=" " value="{{ user.nombre }}" />
          <label for="nombre" class="label">Nombre <span class="requerido">*</span></label>
        </div>
  
        <div class="container">
          <input type="text" id="apellido" class="input" placeholder=" " value="{{ user.apellido }}" />
          <label for="apellido" class="label">Apellido <span class="requerido">*</span></label>
        </div>
      </div>
    </div>
  
    <hr>
  
    <form class="form" method="post">
        {% csrf_token %}
        <!--Calendario-->
        <div class="calendario">
          <h2>Elige la fecha de tu visita</h2>
          <input type="date" id="fecha-visita" name="fecha-visita" min="1924-01-01" max="2006-12-31" >
        </div>
    
        <!--Cantidad personas-->
        <div class="cantidad-personas">
          <h2>¿Cuántas personas van?</h2>
          <div class="counter-container">
            <button class="counter-btn" id="decrement">-</button>
            <input type="text" class="counter-input" id="counter" value="1" readonly>
            <button class="counter-btn" id="increment">+</button>
          </div>
        </div>
      
    
      <hr>
    
      <section class="dos-columnas">
        <div class="columna izquierda">
            <div class="detalle-item">
              <p class="descripcion">Descripción del pago:</p>
              <div class="container-pago">
                <label for="lugar" class="lugar">Lugar Turístico</label>
                <input disabled type="text" id="lugar" class="input-pago-lugar" placeholder=" ">
              </div>
    
              <!--Opcional-->
              <div class="container-pago">
                <label for="guia" class="guia">Valor añadido por persona</label>
                <input disabled type="text" id="guia" class="input-pago-guia" placeholder=" ">
              </div>
              <div class="container-pago-total">
                <label for="total" class="total">TOTAL:</label>
                <input disabled type="text" id="total" class="input-pago-total" placeholder=" ">
              </div>
            </div>
        </div>
    
        <div class="columna derecha">
            <button type="submit">COMPRA AHORA!!</button>
        </div>
      </section>
    </form>
    <script>
        const add = document.getElementById('increment');
        const less = document.getElementById('decrement');
        const counterInput = document.getElementById('counter');
        let count = parseInt(counterInput.value, 10); 

        add.addEventListener('click', () => {
            count++;
            counterInput.value = count;
        });

        less.addEventListener('click', () => {
            count--;
            counterInput.value = count;
        });
    </script>
    
        {% comment %} Cómo puedo saber si estoy logueado desde otro template antes de inyectar la sección que deseo al base.html? {% endcomment %}
    {% else %}
      <main class="contenedorprincipal">
          <section id='pantalla-dividida'>
              <div class="ladoizquierdo">
                  <div class="cuadradoi">
                      <h1 class="titulo">¡Hola!</h1>
                      <h2 class="texto">Para proceder con la compra del servicio, primero debes iniciar sesión:</h2>
                      <a href="{% url "iniciar_sesion" %}" class="btn-base">
                          Iniciar sesión
                      </a>
                      <h2 class="texto">Si aún no tienes una cuenta, puedes crear una haciendo clic en el siguiente botón:</h2>
                      <a href="{% url "registrarse" %}" class="btn-base">
                          Regístrate
                      </a>
                      <h2 class="texto">Si deseas explorar nuevamente los lugares turísticos que ofrecemos, puedes hacerlo haciendo clic en el siguiente botón:</h2>
                      <a href="{% url "lugares_turisticos" %}" class="btn-base">
                          Lugares turísticos
                      </a>
                  </div>
              </div>
              <div class="ladoderecho">
                  <div class="cuadradod">
                      <img class="img-section" src="{% static "img/collageAlbum.webp" %} " alt="" />
                  </div>
              </div>
          </section>
      </main>
    {% endif %}
{% endblock main_content %}
